---
- name: "Ensure that variable is string"
  ansible.builtin.assert:
    that: vars[item] | type_debug in ["str", "string", "AnsibleUnicode", "AnsibleUnsafeText", "AnsibleVaultEncryptedUnicode"]
    quiet: true
    fail_msg: "The variable must be a string"
  loop:
    - vector_docker_version
    - vector_docker_tag
    - vector_docker_image
    - vector_docker_instance
    - vector_docker_timezone
    - vector_docker_data_dir
  tags:
    - vector
    - validate


- name: "Ensure that variable is boolean"
  ansible.builtin.assert:
    that: vars[item] | type_debug == "bool"
    quiet: true
    fail_msg: "The variable must be a boolean"
  loop:
    - vector_docker_bind_mount_volumes
  tags:
    - vector
    - validate


- name: "Ensure that variable is list"
  ansible.builtin.assert:
    that: vars[item] | type_debug in ["list", "AnsibleSequence"]
    quiet: true
    fail_msg: "The variable must be a list"
  loop:
    - vector_docker_extra_volumes
  tags:
    - vector
    - validate


- name: "Ensure that variable is dict"
  ansible.builtin.assert:
    that: vars[item] is mapping
    quiet: true
    fail_msg: "The variable must be a dictionary"
  loop:
    - vector_docker_compose_extra_conf
  tags:
    - vector
    - validate


- name: "Validating variable: vector_docker_config"
  ansible.builtin.assert:
    that: vector_docker_config | from_yaml is mapping
    quiet: true
  tags:
    - vector
    - validate
